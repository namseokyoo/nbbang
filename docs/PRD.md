# PRD: 엔빵 계산기 (N-ppang Calculator)

> **문서 버전**: v1.0
> **작성일**: 2026-01-27
> **작성자**: CEO Agent
> **상태**: 📋 검토 대기

---

## 1. 제품 개요

### 1.1 제품명
- **한글**: 엔빵 계산기
- **영문**: N-ppang Calculator
- **도메인**: nbbang.click (기존 보유)

### 1.2 제품 설명
모임이나 회식 후 복잡한 정산을 간편하게 해결해주는 웹 애플리케이션. 여러 차수(1차, 2차 등)에 걸친 비용을 개인별로 정확하게 계산하고, 최적화된 송금 방법을 제시합니다.

### 1.3 배경 및 필요성
- 기존 Flutter 웹앱(nbbang.click)의 완전한 재구축
- 기존 핵심 기능 유지 + 수익화 모델 추가
- SEO 최적화 및 성능 개선 필요
- 회사의 첫 수익화 프로젝트

### 1.4 목표
| 목표 | 측정 지표 | 목표치 |
|------|----------|--------|
| 사용자 확보 | MAU | 1,000명 (3개월 내) |
| 수익 창출 | 월 광고 수익 | $10+ (6개월 내) |
| 사용자 만족 | 재방문율 | 30%+ |

---

## 2. 타겟 사용자

### 2.1 주요 사용자
| 페르소나 | 설명 | 니즈 |
|----------|------|------|
| 직장인 | 팀 회식 후 정산 담당자 | 빠르고 정확한 정산 |
| 대학생 | 동아리/MT 비용 정산 | 공정한 비용 분배 |
| 모임 총무 | 정기 모임 관리자 | 투명한 정산 내역 |

### 2.2 사용 시나리오
1. **기본 시나리오**: 회식 후 총무가 비용 입력 → 정산 결과 공유
2. **복잡한 시나리오**: 1차/2차/3차 별도 참여자, 일부만 참여한 항목 처리
3. **재방문 시나리오**: 이전 정산 결과 재확인 (URL 공유)

---

## 3. 핵심 기능

### 3.1 참가자 관리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 참가자 추가/삭제 | 이름으로 참가자 관리 | P0 |
| 총무(Manager) 지정 | 돈을 모으는 사람 지정 | P0 |
| 참가자 수정 | 이름 변경 | P1 |

**데이터 구조**:
```typescript
interface Participant {
  id: string;
  name: string;
  isManager: boolean; // 총무 여부
}
```

### 3.2 라운드(차수) 관리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 라운드 추가/삭제 | 1차, 2차 등 차수 관리 | P0 |
| 라운드별 항목 관리 | 각 차수에 비용 항목 추가 | P0 |
| 라운드 이름 변경 | "1차" → "저녁 식사" 등 | P2 |

**데이터 구조**:
```typescript
interface Round {
  id: string;
  name: string; // "1차", "2차" 또는 커스텀
  items: ExpenseItem[];
}
```

### 3.3 비용 항목 관리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 항목 추가 | 이름, 금액, 참여자, 결제자 | P0 |
| 선택적 참여자 | 일부만 참여한 항목 처리 | P0 |
| 결제자 지정 | 누가 결제했는지 기록 | P0 |
| 항목 수정/삭제 | 입력 오류 수정 | P0 |

**데이터 구조**:
```typescript
interface ExpenseItem {
  id: string;
  name: string;           // 항목명 (예: "삼겹살")
  cost: number;           // 금액
  participants: string[]; // 참여자 ID 목록 (선택적)
  paidBy: string;         // 결제자 ID
}
```

### 3.4 정산 결과

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 라운드별 내역 | 각 차수별 개인 부담금 | P0 |
| 개인별 총액 | 총 내야 할 금액 / 받을 금액 | P0 |
| 송금 안내 | 누가 누구에게 얼마 송금 | P0 |
| 송금 최적화 | 송금 횟수 최소화 알고리즘 | P1 |
| 단순화 토글 | 최적화 ON/OFF | P1 |

**정산 알고리즘**:
```typescript
interface Settlement {
  from: string;   // 송금자 ID
  to: string;     // 수취자 ID
  amount: number; // 금액
}

// 최적화 알고리즘: 채무자/채권자 매칭으로 송금 횟수 최소화
function optimizeTransfers(settlements: Settlement[]): Settlement[];
```

### 3.5 UI/UX 기능

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 캐러셀 UI | 참가자 → 라운드들 → 결과 슬라이드 | P0 |
| 계산기 팝업 | 금액 입력 시 계산기 제공 | P1 |
| 반응형 디자인 | 모바일 최적화 | P0 |
| 다크모드 | 시스템 설정 연동 | P2 |

### 3.6 데이터 관리

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| URL 상태 저장 | URL로 정산 내용 공유 가능 | P0 |
| 로컬 저장 | 브라우저 새로고침 대응 | P1 |
| 결과 공유 | 카카오톡 등 공유 기능 | P1 |

---

## 4. 기술 스택

### 4.1 프론트엔드
| 기술 | 버전 | 용도 |
|------|------|------|
| Next.js | 14+ | 프레임워크 (App Router) |
| React | 18+ | UI 라이브러리 |
| TypeScript | 5+ | 타입 안정성 |
| Tailwind CSS | 3+ | 스타일링 |
| Zustand | 4+ | 상태 관리 |

### 4.2 인프라
| 기술 | 용도 |
|------|------|
| Vercel | 호스팅 및 배포 |
| Google Analytics | 사용자 분석 |
| Google AdSense | 광고 수익화 |

### 4.3 개발 도구
| 도구 | 용도 |
|------|------|
| ESLint | 코드 품질 |
| Prettier | 코드 포맷팅 |
| Jest | 단위 테스트 |

---

## 5. 수익화 모델

### 5.1 1단계: 광고 수익 (MVP)
| 위치 | 형태 | 예상 영향 |
|------|------|----------|
| 결과 페이지 하단 | 배너 광고 | 낮음 |
| 정산 완료 후 | 전면 광고 (선택적) | 중간 |

### 5.2 2단계: 프리미엄 기능 (추후)
| 기능 | 설명 | 가격 |
|------|------|------|
| 광고 제거 | 광고 없는 사용 | 월 ₩1,000 |
| 정산 히스토리 | 과거 정산 저장/조회 | 월 ₩2,000 |
| 그룹 관리 | 정기 모임 그룹 저장 | 월 ₩2,000 |

---

## 6. MVP 범위

### 6.1 MVP 포함 (v1.0)
- [x] 참가자 추가/삭제/총무 지정
- [x] 라운드 추가/삭제
- [x] 비용 항목 추가/수정/삭제 (선택적 참여자, 결제자)
- [x] 정산 결과 표시 (라운드별, 개인별, 송금 안내)
- [x] 송금 최적화 알고리즘
- [x] 캐러셀 UI
- [x] 반응형 디자인 (모바일 우선)
- [x] URL 상태 저장 (공유 가능)
- [x] Google AdSense 배너 광고

### 6.2 MVP 제외 (v1.1+)
- [ ] 계산기 팝업
- [ ] 다크모드
- [ ] 카카오톡 공유
- [ ] 프리미엄 기능
- [ ] 사용자 계정 시스템

---

## 7. 성공 지표 (KPI)

### 7.1 사용자 지표
| 지표 | 정의 | 목표 (3개월) |
|------|------|-------------|
| DAU | 일일 활성 사용자 | 50명 |
| MAU | 월간 활성 사용자 | 1,000명 |
| 세션 시간 | 평균 사용 시간 | 3분+ |
| 완료율 | 정산 완료까지 진행 | 70%+ |

### 7.2 비즈니스 지표
| 지표 | 정의 | 목표 (6개월) |
|------|------|-------------|
| 광고 노출 | 월간 광고 노출 수 | 10,000+ |
| 광고 수익 | 월간 AdSense 수익 | $10+ |
| 전환율 | 프리미엄 전환 (추후) | 2%+ |

---

## 8. 일정 계획

### 8.1 마일스톤
| 단계 | 기간 | 내용 |
|------|------|------|
| 설계 | 1일 | PRD 확정, 디자인 시스템 |
| 개발 | 5-7일 | MVP 기능 구현 |
| 테스트 | 1-2일 | QA 및 버그 수정 |
| 배포 | 1일 | Vercel 배포, AdSense 연동 |
| **총 예상** | **1-2주** | |

### 8.2 우선순위
1. **Week 1**: 핵심 기능 (참가자, 라운드, 항목, 정산)
2. **Week 2**: UI 완성, 광고 연동, 배포

---

## 9. 리스크 및 대응

| 리스크 | 영향 | 대응 방안 |
|--------|------|----------|
| AdSense 승인 지연 | 수익화 지연 | 콘텐츠 충실화, 프라이버시 정책 준비 |
| 복잡한 정산 케이스 | 버그 발생 | 단위 테스트 철저히 작성 |
| 모바일 UX 이슈 | 사용성 저하 | 모바일 우선 개발, 실기기 테스트 |

---

## 10. 참고 자료

### 10.1 기존 앱 분석 (Flutter 버전)
- **소스 위치**: `/Volumes/external/flutter_project/N_bbang`
- **핵심 파일**:
  - `data_model.dart`: 데이터 구조 및 정산 알고리즘
  - `settlement_result_card.dart`: 최적화 알고리즘 (`optimizeTransfers`)
  - `round_card.dart`: 라운드/항목 UI 패턴

### 10.2 경쟁 서비스
| 서비스 | 특징 | 차별점 |
|--------|------|--------|
| 더치페이 앱들 | 단순 n분의 1 | 선택적 참여자, 다차수 지원 |
| Splitwise | 그룹 관리, 복잡함 | 더 간단한 UX, 한국 시장 최적화 |

---

## 11. 승인

| 역할 | 담당 | 승인 | 날짜 |
|------|------|------|------|
| PRD 작성 | CEO Agent | ✅ | 2026-01-27 |
| Board Advisor 검토 | Gemini | ⏳ | - |
| 회장님 승인 | NAMSEOK | ⏳ | - |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2026-01-27 | 초안 작성 | CEO Agent |
